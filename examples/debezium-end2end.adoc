Env:

- AMQ Streams 2.5.0
- Debezium 2.4.0.Final
- MySQL 8.0

Prerequisties:

-  Install the AMQ Streams Operator from OperatorHub
-  Install the camelk Operator from OperatorHub

1. Create namespaces myproject, myproject2 and myproject3
2. Created the following Kafka clusters

[source, yaml,indent=0]
----
    oc create -f - <<EOF
    apiVersion: kafka.strimzi.io/v1beta2
    kind: Kafka
    metadata:
      name: my-cluster
    spec:
      kafka:
        config:
          offsets.topic.replication.factor: 1
          transaction.state.log.replication.factor: 1
          transaction.state.log.min.isr: 2
          default.replication.factor: 1
          min.insync.replicas: 1
          inter.broker.protocol.version: '3.5'
        storage:
          type: jbod
          volumes:
            - deleteClaim: false
              id: 0
              size: 1Gi
              type: persistent-claim
        listeners:
          - name: plain
            port: 9092
            type: internal
            tls: false
          - name: tls
            port: 9093
            type: internal
            tls: true
        version: 3.5.0
        replicas: 3
      entityOperator:
        topicOperator: {}
        userOperator: {}
      zookeeper:
        storage:
          deleteClaim: false
          size: 1Gi
          type: persistent-claim
        replicas: 3
    EOF
----
    
- Install Kafka connect CR with Debezium plugins through AMQ Streams:
- Building and Deploying Debezium Connectors:
- Create a KafkaConnect CR specifying connector plugins and other components.

[source, yaml,indent=0]
----
    oc create -f - <<EOF
    apiVersion: kafka.strimzi.io/v1beta2
    kind: KafkaConnect
    metadata:
      annotations:
        strimzi.io/use-connector-resources: 'true'
      name: debezium-connect
    spec:
      bootstrapServers: 'my-cluster-kafka-bootstrap:9093'
      build:
        output:
          image: >-
            image-registry.openshift-image-registry.svc:5000/debezium/debezium-connect:latest
          type: docker
        plugins:
          - artifacts:
              - type: tgz
                url: >-
                  https://repo1.maven.org/maven2/io/debezium/debezium-connector-mongodb/2.4.0.Final/debezium-connector-mongodb-2.4.0.Final-plugin.tar.gz
            name: debezium-mongodb-connector
          - artifacts:
              - type: tgz
                url: >-
                  https://repo1.maven.org/maven2/io/debezium/debezium-connector-postgres/2.4.0.Final/debezium-connector-postgres-2.4.0.Final-plugin.tar.gz
            name: debezium-postgres-connector
          - artifacts:
              - type: tgz
                url: >-
                  https://repo1.maven.org/maven2/io/debezium/debezium-connector-mysql/2.4.0.Final/debezium-connector-mysql-2.4.0.Final-plugin.tar.gz
            name: debezium-mysql-connector
      config:
        config.storage.replication.factor: -1
        config.storage.topic: debezium-connect-configs
        group.id: debezium-connect
        offset.storage.replication.factor: -1
        offset.storage.topic: debezium-connect-offsets
        status.storage.replication.factor: -1
        status.storage.topic: debezium-connect-status
      replicas: 1
      tls:
        trustedCertificates:
          - certificate: ca.crt
            secretName: my-cluster-cluster-ca-cert
      version: 3.5.0
    EOF
----

3. Deploy Kafka Connector:



